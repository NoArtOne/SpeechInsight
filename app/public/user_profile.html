<!DOCTYPE html>
<html>
<head>
    <title>User Profile</title>
</head>
<body>
    <h1>User Profile</h1>
    <p><a href="/audios_page">Мои аудиозаписи</a></p>
    <p><a href="/transactions_page">Мои транзакции</a></p>
    <p><a href="/top_up">Пополнить баланс</a></p>
    <p><a href="/upload_audio">Загрузка новой аудиозаписи</a></p>

    <div id="user-info">
    </div>
     <script>
        console.log("access_token", localStorage.getItem("access_token"))
        fetch('/api/users/me', 
            
            {
                headers: {
                    Authorization: `Bearer ${localStorage.getItem("access_token")}`
                }
            })
            .then(response => {
                if (!response.ok) {
                    throw new Error('Network response fail: ' + response.statusText);
                }
                return response.json();
            })
            .then(data => {
                const userInfoDiv = document.getElementById('user-info');
                userInfoDiv.innerHTML = `
                    <p>Email: ${data.email}</p>
                    <p>Balance: ${data.balance}</p>
                    <p>Role: ${data.role}</p>
                    <p>Status: ${data.status}</p>
                    <!-- Add other user details here -->
                `;
            })
            .catch(error => {
                console.error('Error fetching user data:', error);
                const userInfoDiv = document.getElementById('user-info');
                userInfoDiv.innerHTML = `<p>Error loading user data: ${error.message}</p>`;

            });
    </script>
</body>
</html>